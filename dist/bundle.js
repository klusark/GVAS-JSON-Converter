(()=>{var t={910:(t,e,r)=>{const{SavReader:n}=r(158),{assignPrototype:s}=r(435);t.exports={convertSavToJson:function(t){const e=new n(t).readWholeBuffer();return JSON.stringify(e,null,2)},convertJsonToSav:function(t){let e=new Uint8Array(0);for(const r of JSON.parse(t))s(r),e=new Uint8Array([...e,...r.toBytes()]);return e}}},435:(t,e,r)=>{const{writeInt32:n,writeUint32:s,writeString:i,writeFloat32:a,writeBytes:o,writeDateTime:y,writeInt16:h}=r(817);function p(t){switch(t.type){case"HeaderProperty":return Object.setPrototypeOf(t,u.prototype);case"NoneProperty":return Object.setPrototypeOf(t,c.prototype);case"BoolProperty":return Object.setPrototypeOf(t,d.prototype);case"IntProperty":return Object.setPrototypeOf(t,f.prototype);case"UInt32Property":return Object.setPrototypeOf(t,w.prototype);case"StrProperty":return Object.setPrototypeOf(t,g.prototype);case"EnumProperty":return Object.setPrototypeOf(t,P.prototype);case"FloatProperty":return Object.setPrototypeOf(t,m.prototype);case"StructProperty":return Object.setPrototypeOf(t,U.prototype);case"ArrayProperty":return Object.setPrototypeOf(t,A.prototype);case"MulticastInlineDelegateProperty":return Object.setPrototypeOf(t,B.prototype);case"MapProperty":return Object.setPrototypeOf(t,v.prototype);case"SetProperty":return Object.setPrototypeOf(t,b.prototype);case"ObjectProperty":return Object.setPrototypeOf(t,S.prototype);case"FileEndProperty":return Object.setPrototypeOf(t,l.prototype);default:throw new Error("Unknown property type: "+t.type)}}class u{static GVAS=new Uint8Array([71,86,65,83]);type="HeaderProperty";constructor(t){t.readBytes(u.GVAS.length),this.saveGameVersion=t.readInt32(),this.packageVersion=t.readInt32(),this.engineVersion=t.readInt16()+"."+t.readInt16()+"."+t.readInt16(),this.engineBuild=t.readUInt32(),this.engineBranch=t.readString(),this.customVersionFormat=t.readInt32();const e=t.readInt32(),r=new Map;for(let n=0;n<e;n++)r.set(t.readBytes(16),t.readInt32());this.customVersions=Array.from(r.entries()),this.saveGameClassName=t.readString()}toBytes(){let t=new Uint8Array([...u.GVAS,...n(this.saveGameVersion),...n(this.packageVersion),...h(this.engineVersion.split(".")[0]),...h(this.engineVersion.split(".")[1]),...h(this.engineVersion.split(".")[2]),...s(this.engineBuild),...i(this.engineBranch),...n(this.customVersionFormat),...n(this.customVersions.length)]);for(let e=0;e<this.customVersions.length;e++)t=new Uint8Array([...t,...o(this.customVersions[e][0]),...n(this.customVersions[e][1])]);return t=new Uint8Array([...t,...i(this.saveGameClassName)]),t}}class c{static bytes=new Uint8Array([5,0,0,0,78,111,110,101,0]);type="NoneProperty";toBytes(){return c.bytes}}class l{static bytes=new Uint8Array([...c.bytes,0,0,0,0]);type="FileEndProperty";toBytes(){return l.bytes}}class d{static padding=new Uint8Array([0,0,0,0,0,0,0,0]);type="BoolProperty";constructor(t,e){this.name=t,e.readBytes(d.padding.length),this.value=e.readBoolean(),e.readBytes(1)}toBytes(){let t=new Uint8Array([...i(this.name),...i(this.type),...d.padding]);return t=!0===this.value?new Uint8Array([...t,1]):new Uint8Array([...t,0]),new Uint8Array([...t,0])}}class f{static padding=new Uint8Array([4,0,0,0,0,0,0,0,0]);type="IntProperty";constructor(t,e){this.name=t,e.readBytes(f.padding.length),this.value=e.readInt32()}toBytes(){return new Uint8Array([...i(this.name),...i(this.type),...f.padding,...n(this.value)])}}class w{static padding=new Uint8Array([4,0,0,0,0,0,0,0,0]);type="UInt32Property";constructor(t,e){this.name=t,e.readBytes(w.padding.length),this.value=e.readUInt32()}toBytes(){return new Uint8Array([...i(this.name),...i(this.type),...w.padding,...s(this.value)])}}class g{static padding=new Uint8Array([0,0,0,0,0,0,0,0]);type="StrProperty";constructor(t,e){this.name=t,this.unknown=e.readBytes(1),e.readBytes(g.padding.length),this.value=e.readString()}toBytes(){return new Uint8Array([...i(this.name),...i(this.type),...o(this.unknown),...g.padding,...i(this.value)])}}class P{static padding=new Uint8Array([0,0,0,0]);type="EnumProperty";constructor(t,e){this.name=t,this.type="EnumProperty",e.readUInt32(),e.readBytes(P.padding.length),this.enum=e.readString(),e.readBytes(1),this.value=e.readString()}toBytes(){const t=4+this.value.length+1;return new Uint8Array([...i(this.name),...i(this.type),...s(t),...P.padding,...i(this.enum),0,...i(this.value)])}}class m{static padding=new Uint8Array([4,0,0,0,0,0,0,0,0]);type="FloatProperty";constructor(t,e){this.name=t,e.readBytes(m.padding.length),this.value=e.readFloat32()}toBytes(){return new Uint8Array([...i(this.name),...i(this.type),...m.padding,...a(this.value)])}}class U{static padding=new Uint8Array([0,0,0,0]);static unknown=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);type="StructProperty";constructor(t,e){this.name=t;const r=e.readUInt32();e.readBytes(4),this.subtype=e.readString(),e.readBytes(17);const n=e.offset+r;if("Guid"===this.subtype)return this.value=e.readBytes(16),this;if("DateTime"===this.subtype)return this.value=e.readDateTime(),this;for(this.value=[];e.offset<n;)this.value.push(e.readProperty())}toBytes(){if("Guid"===this.subtype)return new Uint8Array([...i(this.name),...i(this.type),...s(16),...U.padding,...i("Guid"),...U.unknown,...o(this.value)]);if("DateTime"===this.subtype)return new Uint8Array([...i(this.name),...i(this.type),...s(8),...U.padding,...i("DateTime"),...U.unknown,...y(this.value)]);let t=new Uint8Array(0);for(let e=0;e<this.value.length;e++)if(Array.isArray(this.value[e]))for(let r=0;r<this.value[e].length;r++)p(this.value[e][r]),t=new Uint8Array([...t,...this.value[e][r].toBytes()]);else p(this.value[e]),t=new Uint8Array([...t,...this.value[e].toBytes()]);return new Uint8Array([...i(this.name),...i(this.type),...s(t.length),...U.padding,...i(this.subtype),...U.unknown,...t])}}class A{static padding=new Uint8Array([0,0,0,0]);static unknown=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);type="ArrayProperty";constructor(t,e){this.name=t;const r=e.readUInt32();if(e.readBytes(4),this.subtype=e.readString(),e.readBytes(1),"StructProperty"===this.subtype){const t=e.readUInt32();if(e.readString()!==this.name)throw new Error;if(e.readString()!==this.subtype)throw new Error;if(e.readUInt32(),e.readBytes(4),this.genericType=e.readString(),"0000000000000000000000000000000000"!==e.readBytes(17))throw new Error;if(this.value=[],"Guid"===this.genericType)for(let r=0;r<t;r++)this.value.push(e.readBytes(16));else for(let r=0;r<t;r++){const t=[];let r=null;for(;!(r instanceof c);)r=e.readProperty(),t.push(r);this.value.push(t)}}else this.value=e.readBytes(r)}toBytes(){const t=this.value.length;let e,r=new Uint8Array(0);if("StructProperty"===this.subtype){if("Guid"===this.genericType)for(let e=0;e<t;e++)r=new Uint8Array([...r,...o(this.value[e])]);else for(let e=0;e<t;e++)if(Array.isArray(this.value[e]))for(let t=0;t<this.value[e].length;t++)p(this.value[e][t]),r=new Uint8Array([...r,...this.value[e][t].toBytes()]);else p(this.value[e]),r=new Uint8Array([...r,...this.value[e].toBytes()]);return e=8+this.name.length+1+4+this.subtype.length+1+4+A.padding.length+4+this.genericType.length+1+A.unknown.length+r.length,new Uint8Array([...i(this.name),...i(this.type),...s(e),...A.padding,...i(this.subtype),0,...s(t),...i(this.name),...i(this.subtype),...s(r.length),...A.padding,...i(this.genericType),...A.unknown,...r])}return e=this.value.length/2,new Uint8Array([...i(this.name),...i(this.type),...s(e),...A.padding,...i(this.subtype),0,...o(this.value)])}}class B{static padding=new Uint8Array([0,0,0,0,0]);static unknown=new Uint8Array([1,0,0,0]);type="MulticastInlineDelegateProperty";constructor(t,e){this.name=t,e.readUInt32(),e.readBytes(5),e.readBytes(4),this.object_name=e.readString(),this.function_name=e.readString()}toBytes(){const t=B.unknown.length+4+this.object_name.length+1+4+this.function_name.length+1;return new Uint8Array([...i(this.name),...i(this.type),...s(t),...B.padding,...B.unknown,...i(this.object_name),...i(this.function_name)])}}class v{static padding=new Uint8Array([0,0,0,0]);type="MapProperty";constructor(t,e){this.name=t,e.readUInt32(),e.readBytes(4),this.keyType=e.readString(),this.valueType=e.readString(),e.readBytes(1);const r=new Map;e.readBytes(4);const n=e.readUInt32();for(let t=0;t<n;t++){let t=null,n=null;switch(this.keyType){case"StructProperty":t=e.readBytes(16);break;case"IntProperty":t=e.readInt32();break;default:throw new Error("Key Type not implemented: "+this.keyType)}switch(this.valueType){case"StructProperty":n=[];let t=null;for(;!(t instanceof c);)t=e.readProperty(),n.push(t);break;case"IntProperty":n=e.readInt32();break;case"FloatProperty":n=e.readFloat32();break;case"BoolProperty":n=e.readBoolean();break;default:throw new Error("Value Type not implemented: "+this.valueType)}r.set(t,n)}this.value=Array.from(r.entries())}toBytes(){let t=new Uint8Array(0);const e=new Map(this.value);for(let[r,s]of e){switch(this.keyType){case"StructProperty":t=new Uint8Array([...t,...o(r)]);break;case"IntProperty":t=new Uint8Array([...t,...n(r)]);break;default:throw new Error("Key Type not implemented: "+this.keyType)}switch(this.valueType){case"StructProperty":for(let e=0;e<s.length;e++)p(s[e]),t=new Uint8Array([...t,...s[e].toBytes()]);break;case"IntProperty":t=new Uint8Array([...t,...n(s)]);break;case"FloatProperty":t=new Uint8Array([...t,...a(s)]);break;case"BoolProperty":t=!0===s?new Uint8Array([...t,1]):new Uint8Array([...t,0]);break;default:throw new Error("Value Type not implemented: "+this.valueType)}}return new Uint8Array([...i(this.name),...i(this.type),...s(8+t.length),...v.padding,...i(this.keyType),...i(this.valueType),...v.padding,0,...s(e.size),...t])}}class b{static padding=new Uint8Array([0,0,0,0]);type="SetProperty";constructor(t,e){this.name=t;const r=e.readUInt32();if(e.readBytes(4),this.subtype=e.readString(),e.readBytes(1),"StructProperty"===this.subtype){e.readBytes(4);const t=e.readUInt32();this.value=[];for(let r=0;r<t;r++)this.value.push(e.readBytes(16));return this}this.value=e.readBytes(r)}toBytes(){if("StructProperty"===this.subtype){const t=this.value.length;let e=new Uint8Array(0);for(let r=0;r<t;r++)e=new Uint8Array([...e,...o(this.value[r])]);return new Uint8Array([...i(this.name),...i(this.type),...s(8+e.length),...b.padding,...i(this.subtype),0,...b.padding,...s(t),...e])}return new Uint8Array([...i(this.name),...i(this.type),...s(this.value.length/2),...b.padding,...i(this.subtype),0,...o(this.value)])}}class S{static padding=new Uint8Array([0,0,0,0,0]);type="ObjectProperty";constructor(t,e){this.name=t,e.readUInt32(),e.readBytes(5),this.value=e.readString()}toBytes(){const t=4+this.value.length+1;return new Uint8Array([...i(this.name),...i(this.type),...s(t),...S.padding,...i(this.value)])}}t.exports={assignPrototype:p,UInt32Property:w,StrProperty:g,EnumProperty:P,SetProperty:b,StructProperty:U,ObjectProperty:S,HeaderProperty:u,NoneProperty:c,FloatProperty:m,FileEndProperty:l,BoolProperty:d,IntProperty:f,MapProperty:v,MulticastInlineDelegateProperty:B,ArrayProperty:A}},158:(t,e,r)=>{const{HeaderProperty:n,FileEndProperty:s,NoneProperty:i,BoolProperty:a,IntProperty:o,UInt32Property:y,FloatProperty:h,EnumProperty:p,StructProperty:u,ArrayProperty:c,MulticastInlineDelegateProperty:l,MapProperty:d,SetProperty:f,ObjectProperty:w,StrProperty:g}=r(435);t.exports={SavReader:class{constructor(t){this.offset=0,this.fileArrayBuffer=t,this.fileSize=t.byteLength,this.dataView=new DataView(t)}readWholeBuffer(){const t=[],e=this.readHeader();for(console.log(JSON.stringify(e,null,2)),t.push(e);!this.hasFinished();){const e=this.readProperty();console.log(JSON.stringify(e,null,2)),t.push(e)}return t}hasFinished(){return this.offset===this.fileSize}readHeader(){return new n(this)}readProperty(){if(this.offset+s.bytes.length===this.fileSize&&new Uint8Array(this.fileArrayBuffer.slice(this.offset,this.offset+s.bytes.length)).every(((t,e)=>t===s.bytes[e])))return this.offset+=s.bytes.length,new s;const t=this.readString();if("None"===t)return new i;const e=this.readString();switch(e){case"BoolProperty":return new a(t,this);case"IntProperty":return new o(t,this);case"UInt32Property":return new y(t,this);case"StrProperty":return new g(t,this);case"EnumProperty":return new p(t,this);case"FloatProperty":return new h(t,this);case"StructProperty":return new u(t,this);case"ArrayProperty":return new c(t,this);case"MulticastInlineDelegateProperty":return new l(t,this);case"MapProperty":return new d(t,this);case"SetProperty":return new f(t,this);case"ObjectProperty":return new w(t,this);default:throw new Error("Unknown property type: "+e)}}readString(){const t=this.dataView.getUint32(this.offset,!0);this.offset+=4;const e=(new TextDecoder).decode(this.fileArrayBuffer.slice(this.offset,this.offset+t-1));return this.offset+=t,e}readBoolean(){const t=Boolean(this.dataView.getUint8(this.offset));return this.offset+=1,t}readFloat32(){const t=this.dataView.getFloat32(this.offset,!0);return this.offset+=4,t}readInt16(){const t=Number(this.dataView.getInt16(this.offset,!0));return this.offset+=2,t}readInt32(){const t=Number(this.dataView.getInt32(this.offset,!0));return this.offset+=4,t}readUInt32(){const t=Number(this.dataView.getUint32(this.offset,!0));return this.offset+=4,t}readDateTime(){const t=this.dataView.getBigUint64(this.offset,!0);return this.offset+=8,new Date(Number(t/10000n)+new Date("0001-01-01T00:00:00Z").getTime())}readBytes(t){const e=(r=this.fileArrayBuffer.slice(this.offset,this.offset+t),[...new Uint8Array(r)].reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""));var r;return this.offset+=t,e}}}},817:t=>{function e(t){const e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!0),e}t.exports={writeString:function(t){const r=e(t.length+1),n=(new TextEncoder).encode(t);return new Uint8Array([...r,...n,0])},writeInt16:function(t){const e=new Uint8Array(2);return new DataView(e.buffer).setInt16(0,t,!0),e},writeInt32:function(t){const e=new Uint8Array(4);return new DataView(e.buffer).setInt32(0,t,!0),e},writeUint32:e,writeFloat32:function(t){const e=new Uint8Array(4);return new DataView(e.buffer).setFloat32(0,t,!0),e},writeDateTime:function(t){const e=new Date(t),r=new Uint8Array(8),n=10000n*BigInt(e.getTime())+621355968000000000n;return new DataView(r.buffer).setBigUint64(0,n,!0),r},writeBytes:function(t){return Uint8Array.from(t.match(/../g).map((t=>parseInt(t,16))))}}}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}(()=>{const{convertJsonToSav:t,convertSavToJson:e}=r(910);document.getElementById("sav-input").addEventListener("change",(function(){const t=new FileReader;t.fileName=this.files[0].name,t.onload=function(r){!function(t,e){const r=document.createElement("a");r.setAttribute("href","data:text/json;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.click()}(t.fileName+".json",e(r.target.result))},t.readAsArrayBuffer(this.files[0])})),document.getElementById("json-input").addEventListener("change",(function(){const e=new FileReader;e.fileName=this.files[0].name,e.onload=function(r){!function(t,e){const r=new Blob([e],{type:"octet/stream"}),n=document.createElement("a");n.setAttribute("href",window.URL.createObjectURL(r)),n.setAttribute("download",t),n.click()}(e.fileName+".sav",t(r.target.result))},e.readAsText(this.files[0])}))})()})();